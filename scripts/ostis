#!/bin/sh

help()
{
  cat << EOM
This is a tool for starting up OSTIS system.
USAGE:
  ./ostis [OPTIONS]
OPTIONS:
  --help -h    Print help message
  --sc-web     Run sc-web only
  --sctp       Run sctp only
EOM
}

while [ $# -ne 0 ]
do
  case "$1" in
    --help | -h)
      help
      exit 0
      ;;
    --sc-web)
      RUN_ONLY="sc-web"
      ;;
    --sctp)
      RUN_ONLY="sctp"
      ;;
    esac
    shift
done

if [ "${RUN_ONLY}" != "sc-web" ]
then
  cd /ostis/scripts
  ./build_kb.sh

  cd /ostis/sc-machine/scripts
  ./make_all.sh

  cd /ostis/scripts
  ./run_sctp.sh &
fi

if [ "${RUN_ONLY}" != "sctp" ]
then
  cd /ostis/sc-machine/web/client
  yarn run webpack-dev

  cd /ostis/scripts
  echo "\n\e[1;32mStarting the old sc-web on http://localhost:8000 and the new on http://localhost:8090...\e[0m\n"
  ./run_scweb.sh
fi


